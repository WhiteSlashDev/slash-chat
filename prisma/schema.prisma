generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  relationMode = "prisma"
}

model SAiChat {
  id Int @id @default(autoincrement())
  guildId String @unique
  forumId String
}

model Chats {
  id      Int          @id @default(autoincrement())
  guildId String
  chatId  String       @unique
  history ChatHistory[] 
}


model ChatHistory {
  id     Int    @id @default(autoincrement())
  chat   Chats  @relation(fields: [chatId], references: [chatId])
  chatId String
  role   String
  parts  String @db.VarChar(2048)
  createdAt DateTime   @default(now())

  @@index([chatId], name: "idx_chat_history_chat_id")
}